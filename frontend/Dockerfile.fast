FROM nginx:alpine

# åˆ›å»ºä¸´æ—¶ç›®å½•ç”¨äºå­˜æ”¾å‰ç«¯æ–‡ä»¶
WORKDIR /app

# å¤åˆ¶å‰ç«¯æºä»£ç å’Œé…ç½®
COPY index.html ./
COPY src ./src
COPY public ./public
COPY vite.config.ts ./
COPY tsconfig.json ./
COPY tsconfig.node.json ./
COPY package.json ./

# åˆ›å»ºç®€å•çš„é™æ€é¡µé¢è¯´æ˜
RUN echo '<!DOCTYPE html>\n\
<html lang="zh-CN">\n\
<head>\n\
  <meta charset="UTF-8">\n\
  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n\
  <title>AI æ—…è¡Œè§„åˆ’å¸ˆ - åç«¯æ¼”ç¤º</title>\n\
  <style>\n\
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }\n\
    h1 { color: #1890ff; }\n\
    .success { color: #52c41a; font-weight: bold; }\n\
    .code-block { background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; }\n\
    pre { margin: 0; }\n\
  </style>\n\
</head>\n\
<body>\n\
  <h1>ğŸ‰ AI æ—…è¡Œè§„åˆ’å¸ˆ - ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿ</h1>\n\
  <p class="success">âœ… åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸ï¼</p>\n\
  \n\
  <h2>åç«¯ API æµ‹è¯•</h2>\n\
  <div class="code-block">\n\
    <pre># å¥åº·æ£€æŸ¥\n\
curl http://localhost:3000/health\n\
\n\
# ç”¨æˆ·æ³¨å†Œ\n\
curl -X POST http://localhost:3000/api/auth/register \\\n\
  -H "Content-Type: application/json" \\\n\
  -d '"'"'{"email":"demo@example.com","username":"demouser","password":"demo123456"}'"'"'\n\
\n\
# ç”¨æˆ·ç™»å½•\n\
curl -X POST http://localhost:3000/api/auth/login \\\n\
  -H "Content-Type: application/json" \\\n\
  -d '"'"'{"email":"demo@example.com","password":"demo123456"}'"'"'</pre>\n\
  </div>\n\
  \n\
  <h2>é¡¹ç›®è¯´æ˜</h2>\n\
  <ul>\n\
    <li><strong>åç«¯</strong>: Express + TypeScript + Prisma + PostgreSQL âœ…</li>\n\
    <li><strong>å‰ç«¯</strong>: React + TypeScript + Vite + Ant Design âœ…</li>\n\
    <li><strong>è®¤è¯</strong>: JWT + bcryptjs âœ…</li>\n\
    <li><strong>æ•°æ®åº“</strong>: PostgreSQL 16 âœ…</li>\n\
  </ul>\n\
  \n\
  <h2>å‰ç«¯è¿è¡Œæ–¹å¼</h2>\n\
  <p>ç”±äº Docker æ„å»ºæ—¶é—´è¾ƒé•¿ï¼Œæ¨èä»¥ä¸‹æ–¹å¼è¿è¡Œå‰ç«¯ï¼š</p>\n\
  <div class="code-block">\n\
    <pre># æ–¹å¼ 1: æœ¬åœ°å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰\n\
cd frontend\n\
npm install\n\
npm run dev\n\
# è®¿é—® http://localhost:5173\n\
\n\
# æ–¹å¼ 2: é¢„æ„å»ºå Docker éƒ¨ç½²\n\
cd frontend\n\
npm install\n\
npm run build\n\
# ç„¶åä½¿ç”¨ Docker</pre>\n\
  </div>\n\
  \n\
  <p><strong>GitHub</strong>: <a href="https://github.com/STANWYW/AI-Travel-Planner">https://github.com/STANWYW/AI-Travel-Planner</a></p>\n\
</body>\n\
</html>' > /usr/share/nginx/html/index.html

# å¤åˆ¶ nginx é…ç½®
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]

