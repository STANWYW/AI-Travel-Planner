# AI æ—…è¡Œè§„åˆ’å¸ˆ - å¿«é€Ÿå¯åŠ¨ï¼ˆå›½å†…ç½‘ç»œä¼˜åŒ–ï¼‰

## ğŸš€ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
cd /home/stan/code/AITravelPlanner
./start_docker_china.sh
```

**æˆ–è€…ä½¿ç”¨äº¤äº’å¼å¯åŠ¨è„šæœ¬ï¼š**

```bash
./start.sh
# é€‰æ‹© "2) å›½å†…ä¼˜åŒ–ç‰ˆ"
```

---

## ğŸ“‹ æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **æ ‡å‡†æ–¹å¼** | ä½¿ç”¨å®˜æ–¹é•œåƒ | éœ€è¦é…ç½®åŠ é€Ÿå™¨æˆ–VPN | ç½‘ç»œç•…é€šç¯å¢ƒ |
| **å›½å†…ä¼˜åŒ–ç‰ˆ** âœ… | è‡ªåŠ¨ä½¿ç”¨å›½å†…é•œåƒ | é•œåƒæ›´æ–°å¯èƒ½ç¨æ…¢ | å›½å†…ç½‘ç»œç¯å¢ƒ |

---

## ğŸ”§ è¯¦ç»†æ­¥éª¤

### æ–¹å¼ä¸€ï¼šå›½å†…ä¼˜åŒ–ç‰ˆï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/stan/code/AITravelPlanner

# 2. åœæ­¢æ—§å®¹å™¨ï¼ˆå¦‚æœæœ‰ï¼‰
docker-compose -f docker-compose.china.yml down

# 3. æ„å»ºå¹¶å¯åŠ¨ï¼ˆé¦–æ¬¡éœ€è¦ 5-10 åˆ†é’Ÿï¼‰
docker-compose -f docker-compose.china.yml up -d --build

# 4. æŸ¥çœ‹çŠ¶æ€
docker-compose -f docker-compose.china.yml ps

# 5. æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.china.yml logs -f app
```

### æ–¹å¼äºŒï¼šæ ‡å‡†æ–¹å¼ï¼ˆéœ€å…ˆé…ç½®åŠ é€Ÿå™¨ï¼‰

**é…ç½® Docker Desktop é•œåƒåŠ é€Ÿå™¨ï¼š**

1. æ‰“å¼€ Docker Desktop
2. Settings â†’ Docker Engine
3. æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.nju.edu.cn",
    "https://mirror.ccs.tencentyun.com"
  ]
}
```

4. Apply & Restart

**ç„¶åå¯åŠ¨ï¼š**

```bash
cd /home/stan/code/AITravelPlanner
docker-compose up -d --build
```

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥å®¹å™¨çŠ¶æ€

```bash
docker-compose -f docker-compose.china.yml ps
```

åº”è¯¥çœ‹åˆ°ï¼š
```
NAME                    STATUS
travel-planner-app      Up
travel-planner-db       Up (healthy)
```

### 2. æµ‹è¯•åç«¯ API

```bash
curl http://localhost/health
```

åº”è¯¥è¿”å›ï¼š
```json
{"status":"ok","message":"Server is running"}
```

### 3. è®¿é—®å‰ç«¯

æµè§ˆå™¨æ‰“å¼€ï¼š**http://localhost**

---

## ğŸ“¦ å•å®¹å™¨æ¶æ„è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  travel-planner-app (å•å®¹å™¨)             â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Nginx (ç«¯å£ 80)                  â”‚   â”‚
â”‚  â”‚  - å‰ç«¯é™æ€æ–‡ä»¶æœåŠ¡                â”‚   â”‚
â”‚  â”‚  - åå‘ä»£ç† /api â†’ åç«¯            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Node.js åç«¯ (ç«¯å£ 3000)         â”‚   â”‚
â”‚  â”‚  - Express API                    â”‚   â”‚
â”‚  â”‚  - Prisma ORM                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React å‰ç«¯ (dist/)               â”‚   â”‚
â”‚  â”‚  - Ant Design UI                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ è¿æ¥
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  travel-planner-db (æ•°æ®åº“å®¹å™¨)          â”‚
â”‚  PostgreSQL 16                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿ï¼š**
- âœ… åªéœ€è¦ä¸€ä¸ªåº”ç”¨å®¹å™¨ï¼ˆappï¼‰
- âœ… Nginx å’Œ Node.js åœ¨åŒä¸€å®¹å™¨å†…
- âœ… å‰åç«¯ä»£ç æ‰“åŒ…åœ¨ä¸€èµ·
- âœ… ç®€åŒ–éƒ¨ç½²å’Œç®¡ç†
- âœ… å‡å°‘å®¹å™¨é—´é€šä¿¡å¼€é”€

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ„å»ºè¶…æ—¶

**ç—‡çŠ¶ï¼š**
```
failed to fetch oauth token: ... i/o timeout
```

**è§£å†³ï¼š**
```bash
# ä½¿ç”¨å›½å†…ä¼˜åŒ–ç‰ˆ
./start_docker_china.sh
```

### é—®é¢˜ 2: ç«¯å£å ç”¨

**ç—‡çŠ¶ï¼š**
```
port 80: bind: address already in use
```

**è§£å†³ï¼š**
```bash
# æ–¹æ³• 1: åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
sudo lsof -i :80
sudo kill -9 <PID>

# æ–¹æ³• 2: ä¿®æ”¹ç«¯å£
# ç¼–è¾‘ docker-compose.china.yml
# å°† "80:80" æ”¹ä¸º "8080:80"
```

### é—®é¢˜ 3: æ•°æ®åº“è¿æ¥å¤±è´¥

**è§£å†³ï¼š**
```bash
# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose -f docker-compose.china.yml logs postgres

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.china.yml restart
```

### é—®é¢˜ 4: å‰ç«¯é¡µé¢ç©ºç™½

**è§£å†³ï¼š**
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose -f docker-compose.china.yml logs -f app

# æ£€æŸ¥ Nginx é…ç½®
docker-compose -f docker-compose.china.yml exec app cat /etc/nginx/sites-available/default
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# åœæ­¢æœåŠ¡
docker-compose -f docker-compose.china.yml down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®
docker-compose -f docker-compose.china.yml down -v

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.china.yml restart

# é‡æ–°æ„å»º
docker-compose -f docker-compose.china.yml up -d --build --force-recreate

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.china.yml logs -f

# è¿›å…¥å®¹å™¨
docker-compose -f docker-compose.china.yml exec app bash

# æŸ¥çœ‹èµ„æºå ç”¨
docker stats
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

1. **è®¿é—®åº”ç”¨**: http://localhost
2. **æ³¨å†Œè´¦å·**: ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
3. **é…ç½® API**: ç™»å½•åè¿›å…¥"è®¾ç½®"é¡µé¢ï¼Œé…ç½® OpenRouter API Key
4. **åˆ›å»ºè®¡åˆ’**: ç‚¹å‡»"åˆ›å»ºæ—…è¡Œè®¡åˆ’"ï¼Œå¼€å§‹ä½¿ç”¨ï¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- `DEPLOYMENT_SINGLE_CONTAINER.md` - è¯¦ç»†éƒ¨ç½²æŒ‡å—
- `COMPLETE_FEATURES.md` - åŠŸèƒ½æ¸…å•
- `DOCKER_FIX.md` - Docker ç½‘ç»œé—®é¢˜è§£å†³æ–¹æ¡ˆ

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ—¥å¿—ï¼š`docker-compose -f docker-compose.china.yml logs -f`
2. æ£€æŸ¥çŠ¶æ€ï¼š`docker-compose -f docker-compose.china.yml ps`
3. å‚è€ƒ `DOCKER_FIX.md` æ–‡æ¡£

